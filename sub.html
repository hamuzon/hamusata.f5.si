<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAMUSATA – ホームページ</title>

    <!-- Favicon -->
    <link rel="icon" type="image/webp" href="https://hamusata.f5.si/icon.webp">
    <link rel="icon" type="image/svg+xml" href="https://hamusata.f5.si/icon.svg">
    <link rel="icon" type="image/png" href="https://hamusata.f5.si/icon.png">
    <link rel="apple-touch-icon" href="https://hamusata.f5.si/icon.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Potta+One&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mobile-menu.css">

    <!-- テーマCSS -->
    <script>
      const themeCSS = [
        "css/dark.css",
        "css/dark-hc.css",
        "css/dark-mc.css",
        "css/light.css",
        "css/light-hc.css",
        "css/light-mc.css"
      ];
      themeCSS.forEach(href => document.write(`<link rel="stylesheet" href="${href}">`));
    </script>

    <!-- SEO -->
    <meta name="description" content="HAMUSATA.f5.si のホームページです / This is the homepage of HAMUSATA.f5.si">
    <meta property="og:title" content="HAMUSATA – ホームページ">
    <meta property="og:description" content="HAMUSATA.f5.si のホームページです / This is the homepage of HAMUSATA.f5.si">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hamusata.f5.si">
    <meta property="og:image" content="https://hamusata.f5.si/icon_500_500.webp">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="HAMUSATA – ホームページ">
    <meta name="twitter:description" content="HAMUSATA.f5.si のホームページです / This is the homepage of HAMUSATA.f5.si">
    <meta name="twitter:image" content="https://hamusata.f5.si/icon_500_500.webp">

    <style>
      /* 簡易スタイル統合（カード・検索・お気に入り用） */
      .work-card { display:block; margin:0.5em; padding:1em; border-radius:12px; background:#f9f9f9; box-shadow:0 2px 4px rgba(0,0,0,0.1);}
      .work-card a { text-decoration:none; font-weight:bold; color:#0066cc; }
      .fav-btn { cursor:pointer; font-size:1.2em; margin-left:0.5em; }
      #search { width:80%; max-width:400px; padding:0.5em; margin-bottom:1em; border-radius:8px; border:1px solid #ccc; }
      #favorites,#history{padding:1em;text-align:center;}
      #favorites.hidden,#history.hidden{display:none;}
    </style>
  </head>

  <body class="light">

    <!-- ヘッダー -->
    <header>
      <a href="https://home.hamusata.f5.si" id="home" class="banner-link" aria-label="HAMUSATA ホームへ移動">
        <img src="hamusata_399-120.webp" alt="hamusata home banner" width="399" height="120" loading="lazy" decoding="async">
      </a>
      <button id="menu-toggle" aria-label="メニューを開く">
        <span></span><span></span><span></span>
      </button>
      <nav id="mobile-menu">
        <ul>
          <li><a href="#home" class="nav-home">ホーム</a></li>
          <li><a href="#profile">自己紹介</a></li>
          <li><a href="#portfolio">ポートフォリオ</a></li>
          <li><a href="#status">サービス稼働状況</a></li>
          <li><a href="#mutual-links">相互リンク</a></li>
          <li><a href="#sns">SNSリンク</a></li>
        </ul>
      </nav>
      <div id="menu-overlay"></div>
    </header>

    <!-- 検索 -->
    <div style="text-align:center;"><input type="text" id="search" placeholder="🔍 検索..." oninput="doSearch()"></div>

    <!-- 自己紹介 -->
    <section id="profile">
      <div class="profile">
        <h2>自己紹介</h2>
        <p>こんにちは、hamusataです。webサイトを作ったりネットをしてるネットの海の住民。</p>
        <p>ハムスターを飼っています。</p>
        <p>ネットの海でプログラミングしたりネットしたりして過ごしてます。</p>
      </div>
    </section>

    <!-- ポートフォリオ -->
    <section id="portfolio">
      <h2>ポートフォリオリンク集</h2>
      <div class="works">
        <!-- サンプルカード -->
        <div class="work-card" data-title="HAMUSATA – ホームページ" data-categories="メイン,ポータル">
          <img src="https://hamusata.f5.si/icon.svg" alt="HAMUSATA icon" width="50">
          <h3>HAMUSATA – ホームページ</h3>
          <p>メインのポータルリンク。色々なものをまとめています。</p>
          <a href="https://home.hamusata.f5.si">見る / View</a>
          <span class="fav-btn" onclick="toggleFav('HAMUSATA – ホームページ','https://home.hamusata.f5.si')">☆</span>
        </div>
        <!-- 他カードも同様に data-title, data-categories, ☆ボタン追加 -->
      </div>
    </section>

    <!-- サービス稼働状況 -->
    <section id="status">
      <h2>サービス稼働状況 / Status Page</h2>
      <div class="works">
        <div class="work-card" data-title="サービス稼働状況" data-categories="ステータス,監視">
          <img src="https://hamusata.f5.si/icon.svg" alt="Status icon" width="50">
          <h3>サービス稼働状況</h3>
          <p>PCサーバー + Cloudflare Tunnel を利用しています。再起動時に一時的に接続できない場合があります。</p>
          <a href="https://stats.uptimerobot.com/tT7bs2uEHa">稼働状況を見る / View Status</a>
          <span class="fav-btn" onclick="toggleFav('サービス稼働状況','https://stats.uptimerobot.com/tT7bs2uEHa')">☆</span>
        </div>
      </div>
    </section>

    <!-- 相互リンク -->
    <section id="mutual-links">
      <h2>相互リンク / Mutual Links</h2>
      <div class="works">
        <div class="work-card" data-title="相互リンクページ" data-categories="リンク,相互">
          <img src="https://hamusata.f5.si/icon.svg" alt="Mutual Links icon" width="50">
          <h3>相互リンクページ</h3>
          <p>こちらをクリックすると相互リンクページに移動します。</p>
          <a href="./links/index.html">開く / Open</a>
          <span class="fav-btn" onclick="toggleFav('相互リンクページ','./links/index.html')">☆</span>
        </div>
      </div>
    </section>

    <!-- SNSリンク -->
    <section id="sns">
      <h2>SNSリンク</h2>
      <div class="works">
        <div class="work-card" data-title="Scratch hamusata" data-categories="SNS,Scratch">
          <img src="https://hamusata.f5.si/icon.svg" alt="Scratch icon" width="50">
          <h3>Scratch (hamusata)</h3>
          <p>hamusataアカウント</p>
          <a href="https://scratch.mit.edu/users/hamusata/">見る / View</a>
          <span class="fav-btn" onclick="toggleFav('Scratch hamusata','https://scratch.mit.edu/users/hamusata/')">☆</span>
        </div>
      </div>
    </section>

    <!-- お気に入り & 履歴 -->
    <section id="favorites" class="hidden"><h2>⭐ お気に入り</h2><ul id="fav-list"></ul></section>
    <section id="history" class="hidden"><h2>🕑 履歴</h2><ul id="history-list"></ul></section>

    <!-- フッター -->
    <footer>
      &copy; <span id="year"></span> <a href="https://github.com/hamuzon">@hamuzon / @hamusata</a> – All rights reserved.
    </footer>

    <!-- スクリプト -->
    <script>
      // 年表示
      const baseYear=2025; const now=new Date().getFullYear();
      document.getElementById("year").textContent = now>baseYear?`${baseYear}~${now}`:`${baseYear}`;

      // ダークモード切替
      function applyTheme(){const saved=localStorage.getItem('theme');if(saved)document.body.className=saved;
        else document.body.className=window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light';}
      applyTheme();
      function toggleTheme(){const next=document.body.className==='dark'?'light':'dark';
        document.body.className=next;localStorage.setItem('theme',next);}

      // ハンバーガー
      const menuToggle=document.getElementById('menu-toggle');
      const menuOverlay=document.getElementById('menu-overlay');
      menuToggle.addEventListener('click',()=>document.body.classList.toggle('menu-open'));
      menuOverlay.addEventListener('click',()=>document.body.classList.remove('menu-open'));
      document.querySelectorAll('.nav-home').forEach(el=>el.addEventListener('click',e=>{
        e.preventDefault();
        window.scrollTo({top:0,behavior:'smooth'});
        history.replaceState(null,'',' ');
        document.body.classList.remove('menu-open');
      }));

      // 検索
      function doSearch(){
        const q=document.getElementById("search")?.value.toLowerCase()||'';
        document.querySelectorAll('.work-card').forEach(card=>{
          const title=card.dataset.title.toLowerCase()||'';
          const cats=card.dataset.categories.toLowerCase()||'';
          card.style.display=title.includes(q)||cats.includes(q)?'block':'none';
        });
      }

      // お気に入り
      function toggleFav(title,url){
        let favs=JSON.parse(localStorage.getItem('favs')||'[]');
        const idx=favs.findIndex(f=>f.url===url);
        if(idx>=0) favs.splice(idx,1); else favs.push({title,url});
        localStorage.setItem('favs',JSON.stringify(favs));
        renderFavs();
      }
      function renderFavs(){
        let list=document.getElementById("fav-list"); if(!list)return;
        const favs=JSON.parse(localStorage.getItem('favs')||'[]'); list.innerHTML='';
        favs.forEach(f=>{const li=document.createElement('li'); li.innerHTML=`<a href="${f.url}" target="_blank">${f.title}</a>`; list.appendChild(li);});
      }
      function showFavorites(){const section=document.getElementById("favorites");if(!section)return;section.classList.toggle('hidden');renderFavs();}

      // 履歴
      function recordHistory(title,url){
        let hist=JSON.parse(localStorage.getItem('history')||'[]'); hist.unshift({title,url}); hist=hist.slice(0,10);
        localStorage.setItem('history',JSON.stringify(hist));
      }
      function renderHistory(){
        let list=document.getElementById("history-list"); if(!list)return;
        const hist=JSON.parse(localStorage.getItem('history')||'[]'); list.innerHTML='';
        hist.forEach(h=>{const li=document.createElement('li'); li.innerHTML=`<a href="${h.url}" target="_blank">${h.title}</a>`; list.appendChild(li);});
      }
      function showHistory(){const section=document.getElementById("history");if(!section)return;section.classList.toggle('hidden');renderHistory();}

      // work-card クリックで履歴記録
      document.querySelectorAll('.work-card a').forEach(a=>{a.addEventListener('click',()=>recordHistory(a.textContent,a.href));});
    </script>
  </body>
</html>
