<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YouTube Video Player</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Potta+One&display=swap" rel="stylesheet">

  <style>
    :root {
      --accent-color: #00bcd4;
      --glass-bg: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.2);
      --input-bg: rgba(0, 0, 0, 0.4);
      --text-color: #f4ece2;
    }

    @media (prefers-color-scheme: light) {
      :root {
        --accent-color: #d27d60;
        --glass-bg: rgba(255, 248, 240, 0.8);
        --glass-border: rgba(210, 125, 96, 0.3);
        --input-bg: rgba(255, 255, 255, 0.9);
        --text-color: #3b2f2f;
      }
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Potta One', 'Hiragino Mincho ProN', serif;
    }

    body {
      min-height: 100vh;
      color: var(--text-color);
      background-color: #0a0a0a;
      background-image: 
        radial-gradient(ellipse at 20% 30%, rgba(56, 189, 248, 0.2) 0%, transparent 60%), 
        radial-gradient(ellipse at 80% 70%, rgba(139, 92, 246, 0.15) 0%, transparent 70%);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      transition: background 0.3s;
    }

    @media (prefers-color-scheme: light) {
      body {
        background-color: #fff8f0;
        background-image: none;
      }
    }

    section {
      width: 100%;
      max-width: 900px;
      padding: 2rem;
      border-radius: 24px;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
      text-align: center;
    }

    h1 {
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
      letter-spacing: 2px;
    }

    input[type="text"] {
      width: 100%;
      max-width: 600px;
      padding: 14px;
      border-radius: 14px;
      border: 2px solid var(--glass-border);
      background: var(--input-bg);
      color: var(--text-color);
      outline: none;
      margin-bottom: 1rem;
      font-size: 1rem;
    }

    input[type="number"] {
      width: 60px;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid var(--glass-border);
      background: var(--input-bg);
      color: var(--text-color);
      text-align: center;
      font-size: 1.1rem;
    }

    #player-wrapper {
      position: relative;
      width: 100%;
      aspect-ratio: 16 / 9;
      margin: 20px 0;
      border-radius: 16px;
      overflow: hidden;
      display: none;
      border: 1px solid var(--glass-border);
      background: #000;
    }

    #player {
      position: absolute;
      top: 0;
      left: 0;
      width: 100% !important;
      height: 100% !important;
    }

    .btn-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 10px 0;
    }

    button {
      padding: 10px 18px;
      border: none;
      border-radius: 12px;
      background: var(--glass-border);
      color: var(--text-color);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
      font-size: 0.9rem;
    }

    button:hover:not(:disabled) {
      background: var(--accent-color);
      color: #fff;
      transform: translateY(-2px);
    }

    button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .speed-btn {
      min-width: 65px;
      font-size: 0.8rem;
      background: rgba(128,128,128,0.1);
    }

    #time-display {
      display: none;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin: 20px 0;
    }

    .time-segment {
      background: var(--glass-border);
      padding: 10px;
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 75px;
    }

    .time-val {
      font-size: 2rem;
      color: var(--accent-color);
      margin: 5px 0;
    }

    .step-btn {
      background: none;
      padding: 0;
      min-width: auto;
      font-size: 1.5rem;
    }

    .step-btn:hover {
      background: none;
      color: var(--accent-color);
      transform: none;
    }

    .panel {
      background: rgba(0, 0, 0, 0.1);
      padding: 20px;
      border-radius: 20px;
      border: 1px solid var(--glass-border);
      margin-bottom: 20px;
    }

    #video-thumbnail {
      width: 100%;
      max-width: 320px;
      border-radius: 12px;
      margin-top: 20px;
      border: 1px solid var(--glass-border);
    }

    footer {
      margin-top: auto;
      padding: 2rem;
      font-size: 0.9rem;
      opacity: 0.7;
    }

    footer a {
      color: var(--accent-color);
      text-decoration: none;
    }
  </style>
</head>
<body>

  <section>
    <h1>ğŸ¬YouTube Video PlayerğŸ¬</h1>
    
    <input type="text" id="youtube-url" placeholder="URL ã¾ãŸã¯ å‹•ç”»ID ã‚’å…¥åŠ›" />
    
    <div class="btn-group">
      <button onclick="loadVideo()" style="background: var(--accent-color); color: #fff;">â–¶ èª­ã¿è¾¼ã¿</button>
      <button onclick="location.reload()">ğŸ” ãƒªã‚»ãƒƒãƒˆ</button>
    </div>

    <div id="player-wrapper">
      <div id="player"></div>
    </div>

    <div id="controls" style="display:none;">
      <div class="btn-group">
        <button id="play-pause-btn" onclick="togglePlayPause()" style="min-width: 130px;">â–¶ å†ç”Ÿ</button>
        <button onclick="seekSeconds(-15)">âª -15s</button>
        <button onclick="seekSeconds(15)">â© +15s</button>
        <button id="loop-btn" onclick="toggleLoop()">ğŸ” ãƒ«ãƒ¼ãƒ—OFF</button>
      </div>

      <div class="btn-group">
        <button onclick="changeVolume(-10)">ğŸ”‰ éŸ³é‡-</button>
        <button onclick="changeVolume(10)">ğŸ”Š éŸ³é‡+</button>
        <button id="mute-toggle-btn" onclick="toggleMute()">ğŸ”‡ ãƒŸãƒ¥ãƒ¼ãƒˆ</button>
      </div>

      <div id="time-display">
        <div class="time-segment">
          <button class="step-btn" onclick="adjustTime('h', 1)">â–²</button>
          <span class="time-val" id="time-hour">00</span>
          <button class="step-btn" onclick="adjustTime('h', -1)">â–¼</button>
        </div>
        <span style="font-size:2rem">:</span>
        <div class="time-segment">
          <button class="step-btn" onclick="adjustTime('m', 1)">â–²</button>
          <span class="time-val" id="time-minute">00</span>
          <button class="step-btn" onclick="adjustTime('m', -1)">â–¼</button>
        </div>
        <span style="font-size:2rem">:</span>
        <div class="time-segment">
          <button class="step-btn" onclick="adjustTime('s', 1)">â–²</button>
          <span class="time-val" id="time-second">00</span>
          <button class="step-btn" onclick="adjustTime('s', -1)">â–¼</button>
        </div>
      </div>

      <div class="panel">
        <div class="btn-group">
          <button onclick="setCurrentTimeToInput()" style="font-size: 0.8rem;">ğŸ“ æ™‚åˆ»ã‚’å–å¾—</button>
          <input type="number" id="jump-h" min="0" value="0"> æ™‚
          <input type="number" id="jump-m" min="0" max="59" value="0"> åˆ†
          <input type="number" id="jump-s" min="0" max="59" value="0"> ç§’
          <button onclick="jumpToTime()" style="background: var(--accent-color); color: #fff;">GO</button>
        </div>
      </div>

      <div class="panel">
        <p style="font-size: 0.9rem; margin-bottom: 12px;">å†ç”Ÿé€Ÿåº¦: <span id="speed-label" style="color: var(--accent-color)">1.00</span>x</p>
        <div class="btn-group">
          <button class="speed-btn" onclick="updateSpeed(0.25)">0.25x</button>
          <button class="speed-btn" onclick="updateSpeed(0.5)">0.5x</button>
          <button class="speed-btn" onclick="updateSpeed(1.0)">1x</button>
          <button class="speed-btn" onclick="updateSpeed(1.5)">1.5x</button>
          <button class="speed-btn" onclick="updateSpeed(1.75)">1.75x</button>
          <button class="speed-btn" onclick="updateSpeed(2.0)">2x</button>
          <button class="speed-btn" onclick="updateSpeed(3.0)">3x</button>
          <button class="speed-btn" onclick="updateSpeed(4.0)">4x</button>
        </div>
        <input type="range" id="speed-slider" min="0.25" max="4" step="0.05" value="1" oninput="updateSpeed(this.value)" style="width: 90%; accent-color: var(--accent-color); margin-top:15px;" />
      </div>
      
      <img id="video-thumbnail" src="" alt="" />
    </div>
  </section>

  <footer id="copyright"></footer>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player;
    let isLoop = false;
    let syncInterval;

    (function() {
      const b = 2025;
      const c = new Date().getFullYear();
      const y = (c > b) ? `${b} ã€œ ${c}` : b;
      document.getElementById('copyright').innerHTML = `&copy; ${y} YouTube Ultimate Player | <a href="https://hamuzon.web.fc2.com" target="_blank">@hamuzon</a>`;
    })();

    function extractVideoId(input) {
      const reg = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?|shorts)\/|.*[?&]v=)|youtu\.be\/|img\.youtube\.com\/vi\/)([a-zA-Z0-9_-]{11})/;
      const m = input.match(reg);
      if (m) return m[1];
      if (input.trim().length === 11) return input.trim();
      return null;
    }

    function loadVideo() {
      const id = extractVideoId(document.getElementById('youtube-url').value);
      if (!id) return;
      document.getElementById('video-thumbnail').src = `https://img.youtube.com/vi/${id}/mqdefault.jpg`;
      if (player) player.destroy();
      player = new YT.Player('player', {
        videoId: id,
        playerVars: { 
          'autoplay': 1, 
          'controls': 1, 
          'rel': 0, 
          'modestbranding': 1, 
          'origin': location.origin 
        },
        events: { 
          'onReady': onPlayerReady, 
          'onStateChange': onStateChange 
        }
      });
    }

    function onPlayerReady() {
      document.getElementById('player-wrapper').style.display = 'block';
      document.getElementById('controls').style.display = 'block';
      document.getElementById('time-display').style.display = 'flex';
      startSync();
    }

    function onStateChange(e) {
      const btn = document.getElementById('play-pause-btn');
      if (e.data === 1) {
        btn.textContent = 'â¸ ä¸€æ™‚åœæ­¢';
      } else {
        btn.textContent = 'â–¶ å†ç”Ÿ';
      }
      if (e.data === 0 && isLoop) {
        player.seekTo(0);
      }
    }

    function startSync() {
      if (syncInterval) clearInterval(syncInterval);
      syncInterval = setInterval(() => {
        if (player && player.getCurrentTime) {
          const t = player.getCurrentTime();
          document.getElementById('time-hour').textContent = String(Math.floor(t / 3600)).padStart(2, '0');
          document.getElementById('time-minute').textContent = String(Math.floor((t % 3600) / 60)).padStart(2, '0');
          document.getElementById('time-second').textContent = String(Math.floor(t % 60)).padStart(2, '0');
        }
      }, 500);
    }

    function togglePlayPause() {
      const s = player.getPlayerState();
      if (s === 1) {
        player.pauseVideo();
      } else {
        player.playVideo();
      }
    }

    function seekSeconds(s) {
      player.seekTo(player.getCurrentTime() + s, true);
    }

    function changeVolume(v) {
      const cur = player.getVolume();
      player.setVolume(Math.min(100, Math.max(0, cur + v)));
    }

    function toggleMute() {
      const btn = document.getElementById('mute-toggle-btn');
      if (player.isMuted()) {
        player.unMute();
        btn.textContent = 'ğŸ”‡ ãƒŸãƒ¥ãƒ¼ãƒˆ';
      } else {
        player.mute();
        btn.textContent = 'ğŸ”Š è§£é™¤';
      }
    }

    function toggleLoop() {
      isLoop = !isLoop;
      const btn = document.getElementById('loop-btn');
      btn.textContent = isLoop ? 'ğŸ” ãƒ«ãƒ¼ãƒ—ON' : 'ğŸ” ãƒ«ãƒ¼ãƒ—OFF';
      btn.style.color = isLoop ? 'var(--accent-color)' : '';
    }

    function updateSpeed(v) {
      const s = parseFloat(v);
      player.setPlaybackRate(s);
      document.getElementById('speed-label').textContent = s.toFixed(2);
      document.getElementById('speed-slider').value = s;
    }

    function jumpToTime() {
      const h = parseInt(document.getElementById('jump-h').value) || 0;
      const m = parseInt(document.getElementById('jump-m').value) || 0;
      const s = parseInt(document.getElementById('jump-s').value) || 0;
      player.seekTo((h * 3600) + (m * 60) + s, true);
    }

    function setCurrentTimeToInput() {
      const t = player.getCurrentTime();
      document.getElementById('jump-h').value = Math.floor(t / 3600);
      document.getElementById('jump-m').value = Math.floor((t % 3600) / 60);
      document.getElementById('jump-s').value = Math.floor(t % 60);
    }

    function adjustTime(unit, delta) {
      let diff = 0;
      if (unit === 'h') diff = delta * 3600;
      else if (unit === 'm') diff = delta * 60;
      else if (unit === 's') diff = delta;
      player.seekTo(player.getCurrentTime() + diff, true);
    }
  </script>
</body>
</html>