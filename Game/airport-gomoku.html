<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç©ºæ¸¯ä¸¦ã¹</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
  h1 { color: #333; }
  table { border-collapse: collapse; margin: 20px auto; }
  td {
    width: 50px; height: 50px; border: 1px solid #333;
    text-align: center; vertical-align: middle;
    font-size: 24px; cursor: pointer;
  }
  td.player1 { background-color: #aaf; }
  td.player2 { background-color: #faa; }
</style>
</head>
<body>

<h1>ç©ºæ¸¯ä¸¦ã¹ï¼ˆäº”ç›®ä¸¦ã¹æ´¾ç”Ÿï¼‰</h1>
<p>ç¸¦ãƒ»æ¨ªãƒ»æ–œã‚ã«5ã¤ä¸¦ã¹ãŸã‚‰å‹ã¡ï¼</p>

<table id="board"></table>
<p id="status">ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1ã®ã‚¿ãƒ¼ãƒ³</p>
<button id="restartBtn">ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ</button>

<script>
const SIZE = 10; // 10x10ã®ç›¤
const WIN_COUNT = 5;

let board = [];
let currentPlayer = 1; // 1=ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1, 2=ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2

const tableEl = document.getElementById("board");
const statusEl = document.getElementById("status");
const restartBtn = document.getElementById("restartBtn");

function createBoard() {
  board = Array(SIZE).fill(null).map(() => Array(SIZE).fill(0));
  tableEl.innerHTML = "";
  for (let r = 0; r < SIZE; r++) {
    const tr = document.createElement("tr");
    for (let c = 0; c < SIZE; c++) {
      const td = document.createElement("td");
      td.addEventListener("click", () => handleClick(r, c, td));
      tr.appendChild(td);
    }
    tableEl.appendChild(tr);
  }
}

function handleClick(r, c, td) {
  if (board[r][c] !== 0) return; // ã™ã§ã«ç½®ã‹ã‚Œã¦ã„ã‚‹
  board[r][c] = currentPlayer;
  td.textContent = currentPlayer === 1 ? "âœˆ" : "ğŸ›¬"; // ç©ºæ¸¯ãƒãƒ¼ã‚¯
  td.classList.add(currentPlayer === 1 ? "player1" : "player2");

  if (checkWin(r, c)) {
    alert(`ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼${currentPlayer}ã®å‹åˆ©ï¼`);
    return;
  }

  currentPlayer = currentPlayer === 1 ? 2 : 1;
  statusEl.textContent = `ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼${currentPlayer}ã®ã‚¿ãƒ¼ãƒ³`;
}

// æ¨ªãƒ»ç¸¦ãƒ»æ–œã‚ãƒã‚§ãƒƒã‚¯
function checkWin(r, c) {
  const directions = [
    [0,1],[1,0],[1,1],[1,-1]
  ];
  for (let [dr, dc] of directions) {
    let count = 1;
    // å‰æ–¹å‘
    for (let i = 1; i < WIN_COUNT; i++) {
      let nr = r - dr*i, nc = c - dc*i;
      if (nr<0||nc<0||nr>=SIZE||nc>=SIZE||board[nr][nc]!==currentPlayer) break;
      count++;
    }
    // å¾Œæ–¹å‘
    for (let i = 1; i < WIN_COUNT; i++) {
      let nr = r + dr*i, nc = c + dc*i;
      if (nr<0||nc<0||nr>=SIZE||nc>=SIZE||board[nr][nc]!==currentPlayer) break;
      count++;
    }
    if (count >= WIN_COUNT) return true;
  }
  return false;
}

restartBtn.addEventListener("click", () => {
  currentPlayer = 1;
  statusEl.textContent = "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1ã®ã‚¿ãƒ¼ãƒ³";
  createBoard();
});

// åˆæœŸè¡¨ç¤º
createBoard();
</script>

</body>
</html>