<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>空港並べ（五目並べ） / Airport Gomoku</title>
<meta name="description" content="空港並べ（五目並べ）のブラウザゲームです。縦・横・斜めに5つ並べて勝利を目指そう！ / Airport Gomoku browser game. Place airports in a row of 5 vertically, horizontally, or diagonally to win!">
<style>
  body { font-family: Arial, sans-serif; text-align: center; margin: 10px; transition: background 1s; }
  h1 { color: #333; }
  #board {
    display: grid;
    gap: 2px;
    margin: 0 auto;
    max-width: 90vw;
    max-height: 90vw;
    grid-template-rows: repeat(10, 1fr);
    grid-template-columns: repeat(10, 1fr);
  }
  .cell {
    border: 1px solid #333;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: min(2.5vw, 24px);
    cursor: pointer;
    aspect-ratio: 1 / 1;
    transition: background 0.5s;
  }
  .player1 { background-color: #aaf; }
  .player2 { background-color: #faa; }
  #status { margin-top: 10px; font-size: 1.2em; font-weight: bold; padding: 5px; border-radius: 5px; color: #fff; transition: background 0.5s; }
  #scoreboard { margin-top: 10px; font-size: 1.2em; }
  button { margin-top: 10px; padding: 5px 10px; font-size: 1em; }
</style>
</head>
<body>

<h1>空港並べ（五目並べ）</h1>
<div id="board"></div>
<p id="status">プレイヤー1のターン</p>
<p id="scoreboard">スコア - プレイヤー1: 0 | プレイヤー2: 0</p>
<button id="restartBtn">リスタート</button>

<script>
const SIZE = 10;
const WIN_COUNT = 5;
let board = [];
let currentPlayer = 1;
let scores = [0, 0]; // [player1, player2]

const boardEl = document.getElementById("board");
const statusEl = document.getElementById("status");
const scoreboardEl = document.getElementById("scoreboard");
const restartBtn = document.getElementById("restartBtn");

const playerColors = ["#aaf", "#faa"];

function createBoard() {
  board = Array(SIZE).fill(null).map(() => Array(SIZE).fill(0));
  boardEl.innerHTML = "";
  document.body.style.background = "#fff"; // デフォルト背景
  updateStatusColor();
  for (let r = 0; r < SIZE; r++) {
    for (let c = 0; c < SIZE; c++) {
      const cell = document.createElement("div");
      cell.classList.add("cell");
      cell.addEventListener("click", () => handleClick(r, c, cell));
      boardEl.appendChild(cell);
    }
  }
}

function updateStatusColor() {
  statusEl.style.backgroundColor = playerColors[currentPlayer-1];
  statusEl.textContent = `プレイヤー${currentPlayer}のターン`;
}

function handleClick(r, c, cell) {
  if (board[r][c] !== 0) return;
  board[r][c] = currentPlayer;
  cell.textContent = currentPlayer === 1 ? "✈" : "🛬";
  cell.classList.add(currentPlayer === 1 ? "player1" : "player2");

  if (checkWin(r, c)) {
    scores[currentPlayer-1]++;
    scoreboardEl.textContent = `スコア - プレイヤー1: ${scores[0]} | プレイヤー2: ${scores[1]}`;
    // 勝利グラデーション
    const gradient = `linear-gradient(135deg, ${playerColors[currentPlayer-1]}, ${playerColors[2-currentPlayer]})`;
    document.body.style.background = gradient;
    statusEl.textContent = `プレイヤー${currentPlayer}の勝利！自動リスタートします...`;
    setTimeout(() => {
      currentPlayer = 1;
      createBoard();
    }, 2000);
    return;
  }

  currentPlayer = currentPlayer === 1 ? 2 : 1;
  updateStatusColor();
}

// 勝利判定
function checkWin(r, c) {
  const directions = [
    [0,1], [1,0], [1,1], [1,-1]
  ];
  for (let [dr, dc] of directions) {
    let count = 1;
    for (let i = 1; i < WIN_COUNT; i++) {
      const nr = r - dr*i, nc = c - dc*i;
      if (nr<0||nc<0||nr>=SIZE||nc>=SIZE||board[nr][nc]!==currentPlayer) break;
      count++;
    }
    for (let i = 1; i < WIN_COUNT; i++) {
      const nr = r + dr*i, nc = c + dc*i;
      if (nr<0||nc<0||nr>=SIZE||nc>=SIZE||board[nr][nc]!==currentPlayer) break;
      count++;
    }
    if (count >= WIN_COUNT) return true;
  }
  return false;
}

restartBtn.addEventListener("click", () => {
  currentPlayer = 1;
  createBoard();
});

// 初期表示
createBoard();
</script>

</body>
</html>